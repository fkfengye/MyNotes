<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCPåŒå·¥é€šä¿¡æœºåˆ¶è§£æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 30px;
            overflow: hidden;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        
        h1 {
            color: #1a2a6c;
            margin-bottom: 15px;
            font-size: 2.5rem;
        }
        
        h2 {
            color: #b21f1f;
            margin: 25px 0 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        h3 {
            color: #fdbb2d;
            margin: 20px 0 10px;
        }
        
        p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .intro {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 5px solid #1a2a6c;
        }
        
        .concept-section {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .concept-card {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .concept-card:hover {
            transform: translateY(-5px);
        }
        
        .concept-card h3 {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .concept-card h3 i {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .diagram-container {
            background-color: #f0f4f8;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            position: relative;
            overflow: hidden;
        }
        
        .host-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
        }
        
        .host {
            width: 45%;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .host::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            border-radius: 10px 10px 0 0;
        }
        
        .buffer {
            margin: 15px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px dashed #ccc;
        }
        
        .buffer-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #1a2a6c;
        }
        
        .buffer-content {
            min-height: 80px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .data-segment {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #1a2a6c;
            color: white;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .data-segment.sent {
            background-color: #28a745;
        }
        
        .data-segment.acked {
            background-color: #17a2b8;
        }
        
        .data-segment.received {
            background-color: #ffc107;
            color: #333;
        }
        
        .connection-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(to right, transparent, #1a2a6c, transparent);
            z-index: 1;
        }
        
        .data-flow {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #b21f1f;
            top: calc(50% - 10px);
            animation: flow 3s linear infinite;
        }
        
        .data-flow.reversed {
            background-color: #fdbb2d;
            animation: flow-reverse 3s linear infinite;
        }
        
        @keyframes flow {
            0% { left: 25%; }
            100% { left: 75%; }
        }
        
        @keyframes flow-reverse {
            0% { left: 75%; }
            100% { left: 25%; }
        }
        
        .seq-ack-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .seq-ack-table th, .seq-ack-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        
        .seq-ack-table th {
            background-color: #1a2a6c;
            color: white;
        }
        
        .seq-ack-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        .seq-ack-table tr:hover {
            background-color: #e9ecef;
        }
        
        .code-block {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }
        
        .key-points {
            background-color: #e8f4fd;
            padding: 20px;
            border-radius: 10px;
            margin: 30px 0;
            border-left: 5px solid #17a2b8;
        }
        
        .key-points ul {
            padding-left: 20px;
        }
        
        .key-points li {
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #6c757d;
        }
        
        @media (max-width: 768px) {
            .host-container {
                flex-direction: column;
            }
            
            .host {
                width: 100%;
                margin-bottom: 30px;
            }
            
            .concept-card {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>TCPåŒå·¥é€šä¿¡æœºåˆ¶è§£æ</h1>
            <p>æ·±å…¥ç†è§£TCPå…¨åŒå·¥é€šä¿¡çš„æœ¬è´¨ä¸åº•å±‚å®ç°</p>
        </header>
        
        <section class="intro">
            <h2>TCPå…¨åŒå·¥é€šä¿¡æ¦‚è¿°</h2>
            <p>TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚å…¶"å…¨åŒå·¥"ç‰¹æ€§å…è®¸é€šä¿¡åŒæ–¹åŒæ—¶å‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œå°±åƒç”µè¯é€šè¯ä¸€æ ·ï¼ŒåŒæ–¹å¯ä»¥åŒæ—¶è®²è¯å’Œè†å¬ã€‚</p>
            <p>ä½†TCPçš„åŒå·¥é€šä¿¡å¹¶éé€šè¿‡ä¸¤ä¸ªç‹¬ç«‹çš„ç‰©ç†é€šé“å®ç°ï¼Œè€Œæ˜¯é€šè¿‡<strong>é€»è¾‘ä¸Šç‹¬ç«‹çš„å‘é€å’Œæ¥æ”¶ç¼“å†²åŒº</strong>ã€<strong>åºåˆ—å·å’Œç¡®è®¤æœºåˆ¶</strong>ä»¥åŠ<strong>æ»‘åŠ¨çª—å£åè®®</strong>åœ¨å•ä¸€ç‰©ç†é€šé“ä¸Šå®ç°çš„ã€‚</p>
        </section>
        
        <section>
            <h2>TCPåŒå·¥é€šä¿¡æ ¸å¿ƒæ¦‚å¿µ</h2>
            <div class="concept-section">
                <div class="concept-card">
                    <h3>ğŸ“¡ å‘é€ä¸æ¥æ”¶ç¼“å†²åŒº</h3>
                    <p>æ¯ä¸ªTCPè¿æ¥ç«¯ç‚¹éƒ½ç»´æŠ¤ä¸¤ä¸ªç‹¬ç«‹çš„ç¼“å†²åŒºï¼š</p>
                    <ul>
                        <li><strong>å‘é€ç¼“å†²åŒº</strong>ï¼šå­˜å‚¨å¾…å‘é€çš„æ•°æ®</li>
                        <li><strong>æ¥æ”¶ç¼“å†²åŒº</strong>ï¼šå­˜å‚¨å·²æ¥æ”¶ä½†å°šæœªè¢«åº”ç”¨å±‚è¯»å–çš„æ•°æ®</li>
                    </ul>
                    <p>è¿™ä¸¤ä¸ªç¼“å†²åŒºå…è®¸TCPç«¯ç‚¹åŒæ—¶å¤„ç†å‘é€å’Œæ¥æ”¶æ“ä½œï¼Œäº’ä¸å¹²æ‰°ã€‚</p>
                </div>
                
                <div class="concept-card">
                    <h3>ğŸ”¢ åºåˆ—å·ä¸ç¡®è®¤æœºåˆ¶</h3>
                    <p>TCPä¸ºæ¯ä¸ªå­—èŠ‚åˆ†é…ä¸€ä¸ªåºåˆ—å·ï¼Œæ¥æ”¶æ–¹é€šè¿‡ç¡®è®¤å·å‘ŠçŸ¥å‘é€æ–¹å·²æˆåŠŸæ¥æ”¶çš„æ•°æ®ã€‚</p>
                    <p>æ¯ä¸ªTCPæ®µåŒ…å«ï¼š</p>
                    <ul>
                        <li><strong>åºåˆ—å·</strong>ï¼šæ ‡è¯†è¯¥æ®µä¸­ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·</li>
                        <li><strong>ç¡®è®¤å·</strong>ï¼šæœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºå·</li>
                    </ul>
                </div>
                
                <div class="concept-card">
                    <h3>ğŸªŸ æ»‘åŠ¨çª—å£åè®®</h3>
                    <p>TCPä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶å®ç°æµé‡æ§åˆ¶å’Œå¯é ä¼ è¾“ï¼š</p>
                    <ul>
                        <li><strong>å‘é€çª—å£</strong>ï¼šå·²å‘é€ä½†å°šæœªç¡®è®¤çš„æ•°æ®èŒƒå›´</li>
                        <li><strong>æ¥æ”¶çª—å£</strong>ï¼šå¯æ¥æ”¶çš„æ•°æ®èŒƒå›´</li>
                    </ul>
                    <p>çª—å£å¤§å°åŠ¨æ€è°ƒæ•´ï¼Œå¹³è¡¡ä¼ è¾“æ•ˆç‡ä¸ç½‘ç»œæ‹¥å¡ã€‚</p>
                </div>
            </div>
        </section>
        
        <section>
            <h2>TCPåŒå·¥é€šä¿¡å®ç°å›¾ç¤º</h2>
            <div class="diagram-container">
                <div class="host-container">
                    <div class="host">
                        <h3>ä¸»æœºA</h3>
                        <div class="buffer">
                            <div class="buffer-title">å‘é€ç¼“å†²åŒº</div>
                            <div class="buffer-content">
                                <div class="data-segment">A1</div>
                                <div class="data-segment sent">A2</div>
                                <div class="data-segment sent">A3</div>
                                <div class="data-segment acked">A4</div>
                                <div class="data-segment acked">A5</div>
                            </div>
                        </div>
                        <div class="buffer">
                            <div class="buffer-title">æ¥æ”¶ç¼“å†²åŒº</div>
                            <div class="buffer-content">
                                <div class="data-segment received">B1</div>
                                <div class="data-segment received">B2</div>
                                <div class="data-segment">B3</div>
                                <div class="data-segment">B4</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="host">
                        <h3>ä¸»æœºB</h3>
                        <div class="buffer">
                            <div class="buffer-title">å‘é€ç¼“å†²åŒº</div>
                            <div class="buffer-content">
                                <div class="data-segment">B1</div>
                                <div class="data-segment sent">B2</div>
                                <div class="data-segment sent">B3</div>
                                <div class="data-segment acked">B4</div>
                                <div class="data-segment">B5</div>
                            </div>
                        </div>
                        <div class="buffer">
                            <div class="buffer-title">æ¥æ”¶ç¼“å†²åŒº</div>
                            <div class="buffer-content">
                                <div class="data-segment received">A1</div>
                                <div class="data-segment received">A2</div>
                                <div class="data-segment">A3</div>
                                <div class="data-segment">A4</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="connection-line"></div>
                <div class="data-flow"></div>
                <div class="data-flow reversed"></div>
            </div>
            
            <p class="text-center"><strong>å›¾ä¾‹è¯´æ˜ï¼š</strong> ç»¿è‰²è¡¨ç¤ºå·²å‘é€çš„æ•°æ®æ®µï¼Œè“è‰²è¡¨ç¤ºå·²ç¡®è®¤çš„æ•°æ®æ®µï¼Œé»„è‰²è¡¨ç¤ºå·²æ¥æ”¶çš„æ•°æ®æ®µï¼Œæ·±è“è‰²è¡¨ç¤ºå¾…å‘é€çš„æ•°æ®æ®µã€‚</p>
        </section>
        
        <section>
            <h2>åºåˆ—å·ä¸ç¡®è®¤æœºåˆ¶è¯¦è§£</h2>
            <p>TCPé€šè¿‡åºåˆ—å·å’Œç¡®è®¤å·å®ç°å¯é ä¼ è¾“ï¼Œä¸‹è¡¨å±•ç¤ºäº†åŒå‘é€šä¿¡ä¸­çš„æ•°æ®æ®µäº¤æ¢ï¼š</p>
            
            <table class="seq-ack-table">
                <thead>
                    <tr>
                        <th>æ–¹å‘</th>
                        <th>æ•°æ®æ®µ</th>
                        <th>åºåˆ—å·</th>
                        <th>ç¡®è®¤å·</th>
                        <th>è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Aâ†’B</td>
                        <td>SYN</td>
                        <td>1000</td>
                        <td>-</td>
                        <td>è¿æ¥è¯·æ±‚ï¼Œåºåˆ—å·åˆå§‹å€¼</td>
                    </tr>
                    <tr>
                        <td>Bâ†’A</td>
                        <td>SYN-ACK</td>
                        <td>5000</td>
                        <td>1001</td>
                        <td>åŒæ„è¿æ¥ï¼Œç¡®è®¤æ”¶åˆ°1000</td>
                    </tr>
                    <tr>
                        <td>Aâ†’B</td>
                        <td>ACK</td>
                        <td>1001</td>
                        <td>5001</td>
                        <td>ç¡®è®¤æ”¶åˆ°Bçš„SYN</td>
                    </tr>
                    <tr>
                        <td>Aâ†’B</td>
                        <td>DATA</td>
                        <td>1001</td>
                        <td>5001</td>
                        <td>Aå‘é€100å­—èŠ‚æ•°æ®</td>
                    </tr>
                    <tr>
                        <td>Bâ†’A</td>
                        <td>DATA</td>
                        <td>5001</td>
                        <td>1101</td>
                        <td>Bå‘é€æ•°æ®ï¼ŒåŒæ—¶ç¡®è®¤æ”¶åˆ°Açš„æ•°æ®</td>
                    </tr>
                    <tr>
                        <td>Aâ†’B</td>
                        <td>DATA</td>
                        <td>1101</td>
                        <td>5101</td>
                        <td>Aå‘é€æ•°æ®ï¼ŒåŒæ—¶ç¡®è®¤æ”¶åˆ°Bçš„æ•°æ®</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="code-block">
// TCPæ®µå¤´éƒ¨ç»“æ„ç¤ºä¾‹
struct TCPHeader {
    uint16_t src_port;      // æºç«¯å£
    uint16_t dst_port;      // ç›®æ ‡ç«¯å£
    uint32_t seq_num;       // åºåˆ—å·
    uint32_t ack_num;       // ç¡®è®¤å·
    uint8_t  data_offset;   // æ•°æ®åç§»
    uint8_t  flags;         // æ§åˆ¶æ ‡å¿—
    uint16_t window;        // çª—å£å¤§å°
    uint16_t checksum;      // æ ¡éªŒå’Œ
    uint16_t urgent_ptr;    // ç´§æ€¥æŒ‡é’ˆ
};
            </div>
        </section>
        
        <section>
            <h2>æ»‘åŠ¨çª—å£å·¥ä½œæœºåˆ¶</h2>
            <p>æ»‘åŠ¨çª—å£æ˜¯TCPå®ç°æµé‡æ§åˆ¶å’Œå¯é ä¼ è¾“çš„æ ¸å¿ƒæœºåˆ¶ï¼š</p>
            
            <div class="diagram-container">
                <div style="text-align: center; margin-bottom: 20px;">
                    <strong>å‘é€çª—å£ç¤ºæ„å›¾</strong>
                </div>
                <div style="display: flex; justify-content: center; align-items: center; height: 100px; background: white; border-radius: 8px; position: relative;">
                    <div style="position: absolute; left: 10%; width: 30%; height: 60px; background: #28a745; border-radius: 5px; display: flex; align-items: center; justify-content: center; color: white;">
                        å·²å‘é€å¹¶ç¡®è®¤
                    </div>
                    <div style="position: absolute; left: 40%; width: 30%; height: 60px; background: #ffc107; border-radius: 5px; display: flex; align-items: center; justify-content: center;">
                        å·²å‘é€æœªç¡®è®¤
                    </div>
                    <div style="position: absolute; left: 70%; width: 20%; height: 60px; background: #17a2b8; border-radius: 5px; display: flex; align-items: center; justify-content: center; color: white;">
                        å¯å‘é€
                    </div>
                    <div style="position: absolute; left: 90%; width: 10%; height: 60px; background: #6c757d; border-radius: 5px; display: flex; align-items: center; justify-content: center; color: white;">
                        ä¸å¯å‘é€
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                    <div>çª—å£å·¦è¾¹ç•Œ</div>
                    <div>çª—å£å³è¾¹ç•Œ</div>
                </div>
            </div>
            
            <p>å½“æ¥æ”¶æ–¹ç¡®è®¤æ•°æ®åï¼Œå‘é€çª—å£å‘å³æ»‘åŠ¨ï¼Œæ–°çš„æ•°æ®å˜ä¸ºå¯å‘é€çŠ¶æ€ã€‚æ¥æ”¶æ–¹é€šè¿‡è°ƒæ•´çª—å£å¤§å°å­—æ®µæ¥æ§åˆ¶å‘é€æ–¹çš„å‘é€é€Ÿç‡ã€‚</p>
        </section>
        
        <section class="key-points">
            <h2>å…³é”®è¦ç‚¹æ€»ç»“</h2>
            <ul>
                <li><strong>TCPåŒå·¥é€šä¿¡ä¸æ˜¯ä¸¤ä¸ªç‰©ç†é€šé“</strong>ï¼šè€Œæ˜¯åœ¨å•ä¸€ç‰©ç†é€šé“ä¸Šé€šè¿‡åè®®æœºåˆ¶å®ç°é€»è¾‘ä¸Šçš„åŒå‘ç‹¬ç«‹é€šä¿¡ã€‚</li>
                <li><strong>ç‹¬ç«‹çš„ç¼“å†²åŒºæ˜¯å…³é”®</strong>ï¼šæ¯ä¸ªTCPç«¯ç‚¹ç»´æŠ¤ç‹¬ç«‹çš„å‘é€å’Œæ¥æ”¶ç¼“å†²åŒºï¼Œä½¿å¾—å‘é€å’Œæ¥æ”¶æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œã€‚</li>
                <li><strong>åºåˆ—å·å’Œç¡®è®¤æœºåˆ¶ä¿éšœå¯é æ€§</strong>ï¼šæ¯ä¸ªæ•°æ®å­—èŠ‚éƒ½æœ‰åºåˆ—å·ï¼Œæ¥æ”¶æ–¹é€šè¿‡ç¡®è®¤å·å‘ŠçŸ¥æˆåŠŸæ¥æ”¶çš„æ•°æ®ã€‚</li>
                <li><strong>æ»‘åŠ¨çª—å£å®ç°æµé‡æ§åˆ¶</strong>ï¼šåŠ¨æ€è°ƒæ•´çª—å£å¤§å°ï¼Œå¹³è¡¡ä¼ è¾“æ•ˆç‡ä¸ç½‘ç»œçŠ¶å†µã€‚</li>
                <li><strong>æ•°æ®æ®µå¯ä»¥æºå¸¦ç¡®è®¤ä¿¡æ¯</strong>ï¼šTCPæ®µå¯ä»¥åŒæ—¶æºå¸¦æ•°æ®å’Œç¡®è®¤ä¿¡æ¯ï¼Œæé«˜åè®®æ•ˆç‡ã€‚</li>
            </ul>
        </section>
        
        <footer>
            <p>TCPåŒå·¥é€šä¿¡æœºåˆ¶è§£æ | ç†è§£ç½‘ç»œåè®®åº•å±‚å®ç°</p>
            <p>Â© 2023 ç½‘ç»œæŠ€æœ¯æ•™è‚²å¯è§†åŒ–</p>
        </footer>
    </div>

    <script>
        // ç®€å•åŠ¨ç”»æ•ˆæœ
        document.addEventListener('DOMContentLoaded', function() {
            const dataSegments = document.querySelectorAll('.data-segment');
            
            // éšæœºæ”¹å˜ä¸€äº›æ•°æ®æ®µçŠ¶æ€ï¼Œæ¨¡æ‹ŸåŠ¨æ€å˜åŒ–
            setInterval(() => {
                dataSegments.forEach(segment => {
                    if (Math.random() > 0.7) {
                        const classes = ['sent', 'acked', 'received', ''];
                        const currentClass = segment.className.split(' ').find(c => c !== 'data-segment');
                        
                        if (currentClass) {
                            segment.classList.remove(currentClass);
                        }
                        
                        const newClass = classes[Math.floor(Math.random() * classes.length)];
                        if (newClass) {
                            segment.classList.add(newClass);
                        }
                    }
                });
            }, 2000);
        });
    </script>
</body>
</html>