<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCPåŒå·¥é€šä¿¡åº•å±‚æµç¨‹ä¸æŠ¥æ–‡ç»“æ„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 30px;
            overflow: hidden;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        
        h1 {
            color: #1a2a6c;
            margin-bottom: 15px;
            font-size: 2.5rem;
        }
        
        h2 {
            color: #b21f1f;
            margin: 25px 0 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        h3 {
            color: #fdbb2d;
            margin: 20px 0 10px;
        }
        
        p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .intro {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 5px solid #1a2a6c;
        }
        
        .concept-section {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .concept-card {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .concept-card:hover {
            transform: translateY(-5px);
        }
        
        .communication-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 40px 0;
        }
        
        .hosts {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 40px;
        }
        
        .host {
            width: 45%;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .host::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            border-radius: 10px 10px 0 0;
        }
        
        .host-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #1a2a6c;
        }
        
        .buffer {
            margin: 15px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px dashed #ccc;
        }
        
        .buffer-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #1a2a6c;
        }
        
        .buffer-content {
            min-height: 80px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .data-segment {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #1a2a6c;
            color: white;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .data-segment.sent {
            background-color: #28a745;
        }
        
        .data-segment.acked {
            background-color: #17a2b8;
        }
        
        .data-segment.received {
            background-color: #ffc107;
            color: #333;
        }
        
        .timeline {
            width: 100%;
            position: relative;
            margin: 30px 0;
        }
        
        .connection-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(to right, transparent, #1a2a6c, transparent);
            z-index: 1;
        }
        
        .data-flow {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #b21f1f;
            top: calc(50% - 10px);
            animation: flow 3s linear infinite;
        }
        
        .data-flow.reversed {
            background-color: #fdbb2d;
            animation: flow-reverse 3s linear infinite;
        }
        
        @keyframes flow {
            0% { left: 25%; }
            100% { left: 75%; }
        }
        
        @keyframes flow-reverse {
            0% { left: 75%; }
            100% { left: 25%; }
        }
        
        .packet-structure {
            background-color: #f0f4f8;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .packet-header {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .packet-field {
            flex: 1;
            min-width: 120px;
            background: white;
            border-radius: 5px;
            padding: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .packet-field .field-name {
            font-weight: bold;
            color: #1a2a6c;
            margin-bottom: 5px;
        }
        
        .packet-field .field-value {
            font-family: 'Courier New', monospace;
            color: #b21f1f;
        }
        
        .packet-data {
            background: white;
            border-radius: 5px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .packet-data .data-content {
            font-family: 'Courier New', monospace;
            color: #333;
            word-break: break-all;
        }
        
        .seq-ack-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .seq-ack-table th, .seq-ack-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        
        .seq-ack-table th {
            background-color: #1a2a6c;
            color: white;
        }
        
        .seq-ack-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        .seq-ack-table tr:hover {
            background-color: #e9ecef;
        }
        
        .key-points {
            background-color: #e8f4fd;
            padding: 20px;
            border-radius: 10px;
            margin: 30px 0;
            border-left: 5px solid #17a2b8;
        }
        
        .key-points ul {
            padding-left: 20px;
        }
        
        .key-points li {
            margin-bottom: 10px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .btn {
            padding: 12px 25px;
            background: #1a2a6c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #2a3a8c;
            transform: translateY(-3px);
        }
        
        .btn-reset {
            background: #b21f1f;
        }
        
        .btn-reset:hover {
            background: #c23f3f;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #6c757d;
        }
        
        @media (max-width: 768px) {
            .hosts {
                flex-direction: column;
            }
            
            .host {
                width: 100%;
                margin-bottom: 30px;
            }
            
            .concept-card {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>TCPåŒå·¥é€šä¿¡åº•å±‚æµç¨‹ä¸æŠ¥æ–‡ç»“æ„</h1>
            <p>æ·±å…¥ç†è§£TCPå…¨åŒå·¥é€šä¿¡çš„å®ç°æœºåˆ¶</p>
        </header>
        
        <section class="intro">
            <h2>TCPåŒå·¥é€šä¿¡æ¦‚è¿°</h2>
            <p>TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚å…¶"å…¨åŒå·¥"ç‰¹æ€§å…è®¸é€šä¿¡åŒæ–¹åŒæ—¶å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚</p>
            <p>TCPçš„åŒå·¥é€šä¿¡å¹¶éé€šè¿‡ä¸¤ä¸ªç‹¬ç«‹çš„ç‰©ç†é€šé“å®ç°ï¼Œè€Œæ˜¯é€šè¿‡<strong>é€»è¾‘ä¸Šç‹¬ç«‹çš„å‘é€å’Œæ¥æ”¶ç¼“å†²åŒº</strong>ã€<strong>åºåˆ—å·å’Œç¡®è®¤æœºåˆ¶</strong>ä»¥åŠ<strong>æ»‘åŠ¨çª—å£åè®®</strong>åœ¨å•ä¸€ç‰©ç†é€šé“ä¸Šå®ç°çš„ã€‚</p>
        </section>
        
        <section>
            <h2>TCPåŒå·¥é€šä¿¡æ ¸å¿ƒæ¦‚å¿µ</h2>
            <div class="concept-section">
                <div class="concept-card">
                    <h3>ğŸ“¡ å‘é€ä¸æ¥æ”¶ç¼“å†²åŒº</h3>
                    <p>æ¯ä¸ªTCPè¿æ¥ç«¯ç‚¹éƒ½ç»´æŠ¤ä¸¤ä¸ªç‹¬ç«‹çš„ç¼“å†²åŒºï¼š</p>
                    <ul>
                        <li><strong>å‘é€ç¼“å†²åŒº</strong>ï¼šå­˜å‚¨å¾…å‘é€çš„æ•°æ®</li>
                        <li><strong>æ¥æ”¶ç¼“å†²åŒº</strong>ï¼šå­˜å‚¨å·²æ¥æ”¶ä½†å°šæœªè¢«åº”ç”¨å±‚è¯»å–çš„æ•°æ®</li>
                    </ul>
                    <p>è¿™ä¸¤ä¸ªç¼“å†²åŒºå…è®¸TCPç«¯ç‚¹åŒæ—¶å¤„ç†å‘é€å’Œæ¥æ”¶æ“ä½œï¼Œäº’ä¸å¹²æ‰°ã€‚</p>
                </div>
                
                <div class="concept-card">
                    <h3>ğŸ”¢ åºåˆ—å·ä¸ç¡®è®¤æœºåˆ¶</h3>
                    <p>TCPä¸ºæ¯ä¸ªå­—èŠ‚åˆ†é…ä¸€ä¸ªåºåˆ—å·ï¼Œæ¥æ”¶æ–¹é€šè¿‡ç¡®è®¤å·å‘ŠçŸ¥å‘é€æ–¹å·²æˆåŠŸæ¥æ”¶çš„æ•°æ®ã€‚</p>
                    <p>æ¯ä¸ªTCPæ®µåŒ…å«ï¼š</p>
                    <ul>
                        <li><strong>åºåˆ—å·</strong>ï¼šæ ‡è¯†è¯¥æ®µä¸­ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·</li>
                        <li><strong>ç¡®è®¤å·</strong>ï¼šæœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºå·</li>
                    </ul>
                </div>
                
                <div class="concept-card">
                    <h3>ğŸªŸ æ»‘åŠ¨çª—å£åè®®</h3>
                    <p>TCPä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶å®ç°æµé‡æ§åˆ¶å’Œå¯é ä¼ è¾“ï¼š</p>
                    <ul>
                        <li><strong>å‘é€çª—å£</strong>ï¼šå·²å‘é€ä½†å°šæœªç¡®è®¤çš„æ•°æ®èŒƒå›´</li>
                        <li><strong>æ¥æ”¶çª—å£</strong>ï¼šå¯æ¥æ”¶çš„æ•°æ®èŒƒå›´</li>
                    </ul>
                    <p>çª—å£å¤§å°åŠ¨æ€è°ƒæ•´ï¼Œå¹³è¡¡ä¼ è¾“æ•ˆç‡ä¸ç½‘ç»œæ‹¥å¡ã€‚</p>
                </div>
            </div>
        </section>
        
        <section class="communication-container">
            <h2>TCPåŒå·¥é€šä¿¡æµç¨‹</h2>
            
            <div class="hosts">
                <div class="host">
                    <div class="host-title">ä¸»æœºA</div>
                    <div class="buffer">
                        <div class="buffer-title">å‘é€ç¼“å†²åŒº</div>
                        <div class="buffer-content" id="host-a-send-buffer">
                            <div class="data-segment">A1</div>
                            <div class="data-segment">A2</div>
                            <div class="data-segment">A3</div>
                            <div class="data-segment">A4</div>
                            <div class="data-segment">A5</div>
                        </div>
                    </div>
                    <div class="buffer">
                        <div class="buffer-title">æ¥æ”¶ç¼“å†²åŒº</div>
                        <div class="buffer-content" id="host-a-recv-buffer">
                            <!-- æ¥æ”¶çš„æ•°æ®å°†åŠ¨æ€æ·»åŠ  -->
                        </div>
                    </div>
                    <div class="seq-info">
                        <p><strong>åºåˆ—å·:</strong> <span id="host-a-seq">1000</span></p>
                        <p><strong>ç¡®è®¤å·:</strong> <span id="host-a-ack">5000</span></p>
                    </div>
                </div>
                
                <div class="host">
                    <div class="host-title">ä¸»æœºB</div>
                    <div class="buffer">
                        <div class="buffer-title">å‘é€ç¼“å†²åŒº</div>
                        <div class="buffer-content" id="host-b-send-buffer">
                            <div class="data-segment">B1</div>
                            <div class="data-segment">B2</div>
                            <div class="data-segment">B3</div>
                            <div class="data-segment">B4</div>
                            <div class="data-segment">B5</div>
                        </div>
                    </div>
                    <div class="buffer">
                        <div class="buffer-title">æ¥æ”¶ç¼“å†²åŒº</div>
                        <div class="buffer-content" id="host-b-recv-buffer">
                            <!-- æ¥æ”¶çš„æ•°æ®å°†åŠ¨æ€æ·»åŠ  -->
                        </div>
                    </div>
                    <div class="seq-info">
                        <p><strong>åºåˆ—å·:</strong> <span id="host-b-seq">5000</span></p>
                        <p><strong>ç¡®è®¤å·:</strong> <span id="host-b-ack">1000</span></p>
                    </div>
                </div>
            </div>
            
            <div class="timeline">
                <div class="connection-line"></div>
                <div class="data-flow" id="flow-a-to-b"></div>
                <div class="data-flow reversed" id="flow-b-to-a"></div>
            </div>
            
            <div class="controls">
                <button class="btn" id="btn-start">å¼€å§‹æ¼”ç¤º</button>
                <button class="btn btn-reset" id="btn-reset">é‡ç½®</button>
            </div>
        </section>
        
        <section>
            <h2>TCPæŠ¥æ–‡ç»“æ„</h2>
            <div class="packet-structure">
                <h3>TCPæŠ¥æ–‡æ®µæ ¼å¼</h3>
                
                <div class="packet-header">
                    <div class="packet-field">
                        <div class="field-name">æºç«¯å£</div>
                        <div class="field-value" id="src-port">54321</div>
                    </div>
                    <div class="packet-field">
                        <div class="field-name">ç›®æ ‡ç«¯å£</div>
                        <div class="field-value" id="dst-port">80</div>
                    </div>
                    <div class="packet-field">
                        <div class="field-name">åºåˆ—å·</div>
                        <div class="field-value" id="seq-num">1000</div>
                    </div>
                    <div class="packet-field">
                        <div class="field-name">ç¡®è®¤å·</div>
                        <div class="field-value" id="ack-num">5000</div>
                    </div>
                </div>
                
                <div class="packet-header">
                    <div class="packet-field">
                        <div class="field-name">æ•°æ®åç§»</div>
                        <div class="field-value">5 (20å­—èŠ‚)</div>
                    </div>
                    <div class="packet-field">
                        <div class="field-name">ä¿ç•™</div>
                        <div class="field-value">000000</div>
                    </div>
                    <div class="packet-field">
                        <div class="field-name">æ§åˆ¶æ ‡å¿—</div>
                        <div class="field-value" id="flags">ACK=1</div>
                    </div>
                    <div class="packet-field">
                        <div class="field-name">çª—å£å¤§å°</div>
                        <div class="field-value" id="window">65535</div>
                    </div>
                </div>
                
                <div class="packet-header">
                    <div class="packet-field">
                        <div class="field-name">æ ¡éªŒå’Œ</div>
                        <div class="field-value">0x7A3B</div>
                    </div>
                    <div class="packet-field">
                        <div class="field-name">ç´§æ€¥æŒ‡é’ˆ</div>
                        <div class="field-value">0</div>
                    </div>
                    <div class="packet-field">
                        <div class="field-name">é€‰é¡¹</div>
                        <div class="field-value">MSS=1460</div>
                    </div>
                    <div class="packet-field">
                        <div class="field-name">å¡«å……</div>
                        <div class="field-value">0000</div>
                    </div>
                </div>
                
                <div class="packet-data">
                    <div class="field-name">æ•°æ®</div>
                    <div class="data-content" id="packet-data">Hello from Host A!</div>
                </div>
            </div>
            
            <p>TCPæŠ¥æ–‡æ®µåŒ…å«20å­—èŠ‚çš„å›ºå®šå¤´éƒ¨å’Œå¯é€‰çš„æ•°æ®éƒ¨åˆ†ã€‚æ¯ä¸ªTCPè¿æ¥ç«¯ç‚¹ç»´æŠ¤ç‹¬ç«‹çš„åºåˆ—å·å’Œç¡®è®¤å·ï¼Œä½¿å¾—åŒå‘é€šä¿¡å¯ä»¥ç‹¬ç«‹è¿›è¡Œã€‚</p>
        </section>
        
        <section>
            <h2>åŒå‘æ•°æ®ä¼ è¾“ç¤ºä¾‹</h2>
            <p>ä¸‹è¡¨å±•ç¤ºäº†TCPåŒå·¥é€šä¿¡ä¸­åŒå‘æ•°æ®ä¼ è¾“çš„åºåˆ—å·å’Œç¡®è®¤å·å˜åŒ–ï¼š</p>
            
            <table class="seq-ack-table">
                <thead>
                    <tr>
                        <th>æ­¥éª¤</th>
                        <th>æ–¹å‘</th>
                        <th>æ•°æ®</th>
                        <th>åºåˆ—å·</th>
                        <th>ç¡®è®¤å·</th>
                        <th>è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Aâ†’B</td>
                        <td>"Hello" (5å­—èŠ‚)</td>
                        <td>1000</td>
                        <td>5000</td>
                        <td>Aå‘é€æ•°æ®ç»™B</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Bâ†’A</td>
                        <td>"Hi" (2å­—èŠ‚)</td>
                        <td>5000</td>
                        <td>1005</td>
                        <td>Bå‘é€æ•°æ®ç»™Aï¼ŒåŒæ—¶ç¡®è®¤æ”¶åˆ°Açš„æ•°æ®</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Aâ†’B</td>
                        <td>"How are you?" (11å­—èŠ‚)</td>
                        <td>1005</td>
                        <td>5002</td>
                        <td>Aå‘é€æ•°æ®ç»™Bï¼ŒåŒæ—¶ç¡®è®¤æ”¶åˆ°Bçš„æ•°æ®</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>Bâ†’A</td>
                        <td>"Fine, thanks" (12å­—èŠ‚)</td>
                        <td>5002</td>
                        <td>1016</td>
                        <td>Bå‘é€æ•°æ®ç»™Aï¼ŒåŒæ—¶ç¡®è®¤æ”¶åˆ°Açš„æ•°æ®</td>
                    </tr>
                </tbody>
            </table>
            
            <p>ä»è¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªæ–¹å‘ä¸Šçš„åºåˆ—å·ç‹¬ç«‹å¢é•¿ï¼Œè€Œç¡®è®¤å·åˆ™ç”¨äºç¡®è®¤ä»å¦ä¸€ä¸ªæ–¹å‘æ¥æ”¶åˆ°çš„æ•°æ®ã€‚</p>
        </section>
        
        <section class="key-points">
            <h2>TCPåŒå·¥é€šä¿¡å…³é”®è¦ç‚¹</h2>
            <ul>
                <li><strong>é€»è¾‘ç‹¬ç«‹è€Œéç‰©ç†ç‹¬ç«‹</strong>ï¼šTCPåŒå·¥é€šä¿¡ä¸æ˜¯ä¸¤ä¸ªç‰©ç†é€šé“ï¼Œè€Œæ˜¯åœ¨å•ä¸€ç‰©ç†é€šé“ä¸Šé€šè¿‡åè®®æœºåˆ¶å®ç°é€»è¾‘ä¸Šçš„åŒå‘ç‹¬ç«‹é€šä¿¡ã€‚</li>
                <li><strong>ç‹¬ç«‹çš„ç¼“å†²åŒºæ˜¯å…³é”®</strong>ï¼šæ¯ä¸ªTCPç«¯ç‚¹ç»´æŠ¤ç‹¬ç«‹çš„å‘é€å’Œæ¥æ”¶ç¼“å†²åŒºï¼Œä½¿å¾—å‘é€å’Œæ¥æ”¶æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œã€‚</li>
                <li><strong>åºåˆ—å·å’Œç¡®è®¤æœºåˆ¶ä¿éšœå¯é æ€§</strong>ï¼šæ¯ä¸ªæ•°æ®å­—èŠ‚éƒ½æœ‰åºåˆ—å·ï¼Œæ¥æ”¶æ–¹é€šè¿‡ç¡®è®¤å·å‘ŠçŸ¥æˆåŠŸæ¥æ”¶çš„æ•°æ®ã€‚</li>
                <li><strong>æ»‘åŠ¨çª—å£å®ç°æµé‡æ§åˆ¶</strong>ï¼šåŠ¨æ€è°ƒæ•´çª—å£å¤§å°ï¼Œå¹³è¡¡ä¼ è¾“æ•ˆç‡ä¸ç½‘ç»œçŠ¶å†µã€‚</li>
                <li><strong>æ•°æ®æ®µå¯ä»¥æºå¸¦ç¡®è®¤ä¿¡æ¯</strong>ï¼šTCPæ®µå¯ä»¥åŒæ—¶æºå¸¦æ•°æ®å’Œç¡®è®¤ä¿¡æ¯ï¼Œæé«˜åè®®æ•ˆç‡ã€‚</li>
                <li><strong>å…¨åŒå·¥ä¼˜åŠ¿</strong>ï¼šåŒå‘ç‹¬ç«‹é€šä¿¡æé«˜äº†å¸¦å®½åˆ©ç”¨ç‡ï¼Œå‡å°‘äº†é€šä¿¡å»¶è¿Ÿã€‚</li>
            </ul>
        </section>
        
        <footer>
            <p>TCPåŒå·¥é€šä¿¡åº•å±‚æµç¨‹ä¸æŠ¥æ–‡ç»“æ„ | ç†è§£ç½‘ç»œåè®®åº•å±‚å®ç°</p>
            <p>Â© 2023 ç½‘ç»œæŠ€æœ¯æ•™è‚²å¯è§†åŒ–</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const hostASendBuffer = document.getElementById('host-a-send-buffer');
            const hostARecvBuffer = document.getElementById('host-a-recv-buffer');
            const hostBSendBuffer = document.getElementById('host-b-send-buffer');
            const hostBRecvBuffer = document.getElementById('host-b-recv-buffer');
            
            const hostASeq = document.getElementById('host-a-seq');
            const hostAAck = document.getElementById('host-a-ack');
            const hostBSeq = document.getElementById('host-b-seq');
            const hostBAck = document.getElementById('host-b-ack');
            
            const flowAToB = document.getElementById('flow-a-to-b');
            const flowBToA = document.getElementById('flow-b-to-a');
            
            const srcPort = document.getElementById('src-port');
            const dstPort = document.getElementById('dst-port');
            const seqNum = document.getElementById('seq-num');
            const ackNum = document.getElementById('ack-num');
            const flags = document.getElementById('flags');
            const window = document.getElementById('window');
            const packetData = document.getElementById('packet-data');
            
            const btnStart = document.getElementById('btn-start');
            const btnReset = document.getElementById('btn-reset');
            
            let aSeq = 1000;
            let aAck = 5000;
            let bSeq = 5000;
            let bAck = 1000;
            
            // å¼€å§‹æ¼”ç¤º
            btnStart.addEventListener('click', function() {
                // é‡ç½®çŠ¶æ€
                resetStates();
                
                // ç¬¬ä¸€æ­¥: Aå‘é€æ•°æ®ç»™B
                setTimeout(() => {
                    updatePacketInfo(54321, 80, aSeq, aAck, "ACK=1", 65535, "Hello from Host A!");
                    flowAToB.style.display = 'block';
                    
                    // ç§»åŠ¨æ•°æ®æ®µ
                    const dataSegment = hostASendBuffer.querySelector('.data-segment');
                    dataSegment.classList.add('sent');
                    
                    // æ›´æ–°åºåˆ—å·
                    aSeq += 5; // "Hello" 5ä¸ªå­—èŠ‚
                    hostASeq.textContent = aSeq;
                }, 1000);
                
                // ç¬¬äºŒæ­¥: Bæ¥æ”¶æ•°æ®å¹¶å‘é€å“åº”
                setTimeout(() => {
                    flowAToB.style.display = 'none';
                    
                    // Bæ¥æ”¶æ•°æ®
                    const receivedSegment = document.createElement('div');
                    receivedSegment.className = 'data-segment received';
                    receivedSegment.textContent = 'A1';
                    hostBRecvBuffer.appendChild(receivedSegment);
                    
                    // æ›´æ–°Bçš„ç¡®è®¤å·
                    bAck = aSeq;
                    hostBAck.textContent = bAck;
                    
                    // Bå‘é€å“åº”
                    updatePacketInfo(80, 54321, bSeq, bAck, "ACK=1", 65535, "Hi from Host B!");
                    flowBToA.style.display = 'block';
                    
                    // ç§»åŠ¨æ•°æ®æ®µ
                    const dataSegment = hostBSendBuffer.querySelector('.data-segment');
                    dataSegment.classList.add('sent');
                    
                    // æ›´æ–°åºåˆ—å·
                    bSeq += 2; // "Hi" 2ä¸ªå­—èŠ‚
                    hostBSeq.textContent = bSeq;
                }, 2500);
                
                // ç¬¬ä¸‰æ­¥: Aæ¥æ”¶æ•°æ®å¹¶å‘é€å“åº”
                setTimeout(() => {
                    flowBToA.style.display = 'none';
                    
                    // Aæ¥æ”¶æ•°æ®
                    const receivedSegment = document.createElement('div');
                    receivedSegment.className = 'data-segment received';
                    receivedSegment.textContent = 'B1';
                    hostARecvBuffer.appendChild(receivedSegment);
                    
                    // æ›´æ–°Açš„ç¡®è®¤å·
                    aAck = bSeq;
                    hostAAck.textContent = aAck;
                    
                    // Aå‘é€å“åº”
                    updatePacketInfo(54321, 80, aSeq, aAck, "ACK=1", 65535, "How are you?");
                    flowAToB.style.display = 'block';
                    
                    // ç§»åŠ¨æ•°æ®æ®µ
                    const dataSegments = hostASendBuffer.querySelectorAll('.data-segment');
                    if (dataSegments.length > 1) {
                        dataSegments[1].classList.add('sent');
                    }
                    
                    // æ›´æ–°åºåˆ—å·
                    aSeq += 11; // "How are you?" 11ä¸ªå­—èŠ‚
                    hostASeq.textContent = aSeq;
                }, 4000);
                
                // ç¬¬å››æ­¥: Bæ¥æ”¶æ•°æ®å¹¶å‘é€å“åº”
                setTimeout(() => {
                    flowAToB.style.display = 'none';
                    
                    // Bæ¥æ”¶æ•°æ®
                    const receivedSegment = document.createElement('div');
                    receivedSegment.className = 'data-segment received';
                    receivedSegment.textContent = 'A2';
                    hostBRecvBuffer.appendChild(receivedSegment);
                    
                    // æ›´æ–°Bçš„ç¡®è®¤å·
                    bAck = aSeq;
                    hostBAck.textContent = bAck;
                    
                    // Bå‘é€å“åº”
                    updatePacketInfo(80, 54321, bSeq, bAck, "ACK=1", 65535, "Fine, thanks!");
                    flowBToA.style.display = 'block';
                    
                    // ç§»åŠ¨æ•°æ®æ®µ
                    const dataSegments = hostBSendBuffer.querySelectorAll('.data-segment');
                    if (dataSegments.length > 1) {
                        dataSegments[1].classList.add('sent');
                    }
                    
                    // æ›´æ–°åºåˆ—å·
                    bSeq += 12; // "Fine, thanks!" 12ä¸ªå­—èŠ‚
                    hostBSeq.textContent = bSeq;
                }, 5500);
                
                // ç¬¬äº”æ­¥: Aæ¥æ”¶æ•°æ®
                setTimeout(() => {
                    flowBToA.style.display = 'none';
                    
                    // Aæ¥æ”¶æ•°æ®
                    const receivedSegment = document.createElement('div');
                    receivedSegment.className = 'data-segment received';
                    receivedSegment.textContent = 'B2';
                    hostARecvBuffer.appendChild(receivedSegment);
                    
                    // æ›´æ–°Açš„ç¡®è®¤å·
                    aAck = bSeq;
                    hostAAck.textContent = aAck;
                }, 7000);
            });
            
            // é‡ç½®
            btnReset.addEventListener('click', resetStates);
            
            function resetStates() {
                // é‡ç½®ç¼“å†²åŒº
                hostASendBuffer.innerHTML = `
                    <div class="data-segment">A1</div>
                    <div class="data-segment">A2</div>
                    <div class="data-segment">A3</div>
                    <div class="data-segment">A4</div>
                    <div class="data-segment">A5</div>
                `;
                
                hostARecvBuffer.innerHTML = '';
                
                hostBSendBuffer.innerHTML = `
                    <div class="data-segment">B1</div>
                    <div class="data-segment">B2</div>
                    <div class="data-segment">B3</div>
                    <div class="data-segment">B4</div>
                    <div class="data-segment">B5</div>
                `;
                
                hostBRecvBuffer.innerHTML = '';
                
                // é‡ç½®åºåˆ—å·å’Œç¡®è®¤å·
                aSeq = 1000;
                aAck = 5000;
                bSeq = 5000;
                bAck = 1000;
                
                hostASeq.textContent = aSeq;
                hostAAck.textContent = aAck;
                hostBSeq.textContent = bSeq;
                hostBAck.textContent = bAck;
                
                // éšè—æ•°æ®æµ
                flowAToB.style.display = 'none';
                flowBToA.style.display = 'none';
                
                // é‡ç½®æŠ¥æ–‡ä¿¡æ¯
                updatePacketInfo(54321, 80, aSeq, aAck, "ACK=1", 65535, "Hello from Host A!");
            }
            
            function updatePacketInfo(src, dst, seq, ack, flag, win, data) {
                srcPort.textContent = src;
                dstPort.textContent = dst;
                seqNum.textContent = seq;
                ackNum.textContent = ack;
                flags.textContent = flag;
                window.textContent = win;
                packetData.textContent = data;
            }
            
            // åˆå§‹åŒ–
            resetStates();
        });
    </script>
</body>
</html>